# OpenCV buildout with default python bindings
# ============================================
#
#

[buildout]
extends =
    base.cfg
    optional.cfg

extensions =
    buildout.dumppickedversions

dump-picked-versions-file = versions.cfg

parts =
    zlib
    libjpeg
    ligpng
    libtiff
    ffmpeg

    tbb
    qt
    cuda

    cvpy
    cmake
    opencv
    pyopencv


[cvpy]
#environment = cvenv
recipe = zc.recipe.egg
eggs =
    ipython
    numpy
    sphinx
scripts = ipython=cvpy
#extra-paths = ${buildout:directory}/parts/opencv/build/lib
#initialization = import os;os.putenv('LD_LIBRARY_PATH','${buildout:directory}/parts/opencv/build/lib')
#rpath = ${buildout:directory}/parts/opencv/build/lib


[cvenv]
LD_LIBRARY_PATH=${buildout:directory}/parts/opencv/build/lib


[cmake]
recipe = hexagonit.recipe.cmmi
url = http://www.cmake.org/files/v2.8/cmake-2.8.7.tar.gz


[opencv]
recipe = hexagonit.recipe.cmmi
url = http://sourceforge.net/projects/opencvlibrary/files/opencv-unix/2.3/OpenCV-2.3.0.tar.bz2/download
configure-command = ${buildout:directory}/parts/cmake/bin/cmake                         \
                    -D CMAKE_BUILD_TYPE=RELEASE                                         \
                    -D CMAKE_INSTALL_PREFIX=${buildout:directory}/parts/opencv/build    \
#                    -D WITH_TBB=ON                                                      \
#                    -D TBB_INCLUDE_DIR=${buildout:directory}/parts/tbb                  \
                    -D BUILD_NEW_PYTHON_SUPPORT=ON                                       \
                    -D PYTHON_EXECUTABLE=${buildout:directory}/bin/cvpy .
